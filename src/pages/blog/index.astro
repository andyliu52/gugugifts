---
import Layout from '../../layouts/Layout.astro';
import Footer from '../../components/Footer.astro';
import CookieConsent from '../../components/CookieConsent.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog', ({ data }) => !data.draft))
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<Layout
  title="Blog | Gugu Gifts — Gift Ideas, Brand Spotlights & Texas Living"
  description="Explore the Gugu Gifts blog for gift-giving inspiration, brand spotlights, local artisan features, and curated lifestyle content from Terrell, Texas."
>
  <!-- Navbar -->
  <header class="fixed top-0 left-0 right-0 z-50 bg-cream/95 backdrop-blur-md shadow-sm transition-all duration-300">
    <nav class="max-w-7xl mx-auto px-6 lg:px-8 flex items-center justify-between h-20">
      <a href="/" class="flex items-baseline gap-0 text-2xl tracking-wide">
        <span class="font-semibold">gugu</span><span class="font-light">gifts</span>
      </a>
      <div class="flex items-center gap-8">
        <a href="/" class="text-sm uppercase tracking-widest font-medium hover:text-gold transition-colors duration-200 hidden sm:inline">Home</a>
        <a href="/blog" class="text-sm uppercase tracking-widest font-medium text-gold transition-colors duration-200">Blog</a>
      </div>
    </nav>
  </header>

  <main id="main-content" class="pt-32 pb-20 px-6">
    <div class="max-w-4xl mx-auto">
      <!-- Page header -->
      <div class="text-center mb-16">
        <p class="text-xs uppercase tracking-[0.2em] text-gold mb-4 font-medium">From Our World to Yours</p>
        <h1 class="font-playfair text-4xl md:text-5xl lg:text-6xl mb-6">The Gugu Journal</h1>
        <div class="divider-gold mx-auto mb-6"></div>
        <p class="text-bronze-light max-w-xl mx-auto leading-relaxed">
          Gift-giving inspiration, brand stories, and a glimpse into the things we love — right here in Terrell, Texas.
        </p>
      </div>

      <!-- Posts grid -->
      <div class="grid gap-8 md:gap-10">
        {posts.map((post, i) => {
          const formattedDate = post.data.date.toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric',
          });
          return (
            <a
              href={`/blog/${post.id}`}
              class={`group block reveal ${i > 0 ? `reveal-delay-${i}` : ''}`}
            >
              <article class="bg-cream-dark/40 border border-gold/10 rounded-2xl p-8 md:p-10 transition-all duration-300 hover:border-gold/30 hover:shadow-lg hover:shadow-gold/5 hover:-translate-y-1">
                <div class="flex flex-wrap gap-2 mb-4">
                  {post.data.tags.slice(0, 3).map((tag: string) => (
                    <span class="text-xs uppercase tracking-widest text-gold/70">
                      {tag}
                    </span>
                  ))}
                </div>
                <h2 class="font-playfair text-2xl md:text-3xl mb-3 group-hover:text-gold transition-colors duration-300">
                  {post.data.title}
                </h2>
                <p class="text-bronze-light leading-relaxed mb-4">
                  {post.data.description}
                </p>
                <div class="flex items-center justify-between text-sm text-warmgray">
                  <time datetime={post.data.date.toISOString()}>{formattedDate}</time>
                  <span class="uppercase tracking-widest text-xs font-medium group-hover:text-gold transition-colors">
                    Read more →
                  </span>
                </div>
              </article>
            </a>
          );
        })}
      </div>
    </div>
  </main>

  <Footer />
  <CookieConsent />
</Layout>
